{% include "header.html" %}


{% if pastas.is_empty() %}
<br>
<p>
    {{ text.list_empty }} <a href="{{ args.public_path_as_str() }}/">{{ text.list_empty_link }}</a>.
</p>
<br>
{%- else %}
<h3>Uploads</h3>
<div style="width: 100%; overflow-x: auto;">
    {% if args.pure_html %}
    <table border="1" style="width: 100%; min-width: 720px; white-space: nowrap;">
        {% else %}
        <table style="width: 100%; min-width: 720px;">
            {% endif %}
            <thead>
                <th style="width: 25%">
                    {{ text.table_key }}
                </th>
                <th style="width: 10%">
                </th>
                <th style="width: 15%">
                    {{ text.table_date }}
                </th>
                <th style="width: 15%">
                    {{ text.table_expires }}
                </th>
                <th style="width: 25%">
                    {{ text.table_title }}
                </th>

                <th style="width: 10%">
                </th>
                <th style="width: 10%">
                </th>
            </thead>
            <tbody>
                {% for pasta in pastas %}
                {% if pasta.pasta_type == "text" && !pasta.private %}
                <tr>
                    <td>
                        <a
                            href="{{ args.public_path_as_str()}}/upload/{{pasta.id_as_animals()}}">{{pasta.id_as_animals()}}</a>
                    </td>
                    <td>
                        {% if args.public_path_as_str() != "" %}
                        {% if args.short_path_as_str() == "" %}
                        <a style="margin-right:1rem; cursor: pointer;" class="copy-button" null
                            data-url="{{ args.public_path_as_str()}}/upload/{{pasta.id_as_animals()}}">{{ text.list_copy
                            }}</a>
                        {% else %}
                        <a style="margin-right:1rem; cursor: pointer;" class="copy-button" data-url="{{ args.short_path_as_str()
                        }}/p/{{pasta.id_as_animals()}}">{{ text.list_copy }}</a>
                        {% endif %}
                        {%- endif %}
                    </td>
                    <td>
                        {{pasta.created_as_string()}}
                    </td>
                    <td>
                        {{pasta.expiration_as_string()}}
                    </td>
                    <td>
                        {{pasta.title}}
                    </td>

                    <td>
                        {% if pasta.editable %}
                        <a style="margin-right:1rem"
                            href="{{ args.public_path_as_str() }}/edit/{{pasta.id_as_animals()}}">{{ text.list_edit
                            }}</a>
                        {%- endif %}
                    </td>
                    <td>
                        <a href="{{ args.public_path_as_str() }}/remove/{{pasta.id_as_animals()}}">{{ text.list_remove
                            }}</a>
                    </td>
                </tr>
                {%- endif %}
                {% endfor %}
            </tbody>
        </table>
        <br>
        <h3>URL Redirects</h3>
        {% if args.pure_html %}
        <table border="1" style="width: 100%; min-width: 720px; ">
            {% else %}
            <table style="width: 100%; min-width: 720px;">
                {% endif %}
                <thead>
                    <th style=" width: 25%">
                        {{ text.table_key }}
                    </th>
                    <th style="width: 10%">
                    </th>
                    <th style="width: 15%">
                        {{ text.table_date }}
                    </th>
                    <th style="width: 15%">
                        {{ text.table_expires }}
                    </th>
                    <th style="width: 25%">
                        {{ text.table_title }}
                    </th>
                    <th style="width: 10%">
                    </th>
                    <th style="width: 10%">
                    </th>
                </thead>
                {% for pasta in pastas %}
                {% if pasta.pasta_type == "url" && !pasta.private %}
                <tr>
                    <td>
                        <a
                            href="{{ args.public_path_as_str() }}/upload/{{pasta.id_as_animals()}}">{{pasta.id_as_animals()}}</a>
                    </td>
                    <td>
                        {% if args.short_path_as_str() == "" %}
                        <a style="margin-right:1rem; cursor: pointer;" class="copy-button"
                            data-url="{{ args.public_path_as_str()                    }}/url/{{pasta.id_as_animals()}}">{{
                            text.list_copy }}</a>
                        {% else %}
                        <a style="margin-right:1rem; cursor: pointer;" class="copy-button" data-url="{{ args.short_path_as_str()
                        }}/u/{{pasta.id_as_animals()}}">{{ text.list_copy }}</a>
                        {% endif %}
                    </td>
                    <td>
                        {{pasta.created_as_string()}}
                    </td>
                    <td>
                        {{pasta.expiration_as_string()}}
                    </td>
                    <td>
                        {{pasta.title}}
                    </td>
                    <td>
                        {% if pasta.editable %}
                        <a style="margin-right:1rem"
                            href="{{ args.public_path_as_str() }}/edit/{{pasta.id_as_animals()}}">{{ text.list_edit
                            }}</a>
                        {%- endif %}
                    </td>
                    <td>
                        <a href="{{ args.public_path_as_str() }}/remove/{{pasta.id_as_animals()}}">{{ text.list_remove
                            }}</a>
                    </td>
                </tr>
                {%- endif %}
                {% endfor %}
                </tbody>
            </table>
            <br>
            {%- endif %}
</div>

<script>
    const copyURLBtns = document.getElementsByClassName("copy-button");

    for (var i = 0; i < copyURLBtns.length; i++) {
        copyURLBtns.item(i).addEventListener("click", event => {
            event.srcElement
            navigator.clipboard.writeText(event.srcElement.getAttribute("data-url"))
            event.srcElement.innerHTML = "{{ text.view_copied }}"
            setTimeout(() => {
                event.srcElement.innerHTML = "{{ text.list_copy }}"
            }, 1000)
        })
    }

</script>
<style>
    .copy-url-button {
        font-size: small;
        padding: 4px;
        padding-left: 0.8rem;
        padding-right: 0.8rem;
        cursor: pointer;
    }

    th,
    td {
        white-space: nowrap;
    }
</style>

{% include "footer.html" %}